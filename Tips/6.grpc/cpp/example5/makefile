all:
	@make build
	@make remove

build:
	protoc --cpp_out=./ grpc_scheduler.proto
	protoc --grpc_out=./ --plugin=protoc-gen-grpc=/home/test/.local/bin/grpc_cpp_plugin grpc_scheduler.proto
	g++ -DCARES_STATICLIB -isystem /home/test/.local/include -o grpc_scheduler.pb.cc.o -c -fPIC grpc_scheduler.pb.cc
	g++ -DCARES_STATICLIB -isystem /home/test/.local/include -o grpc_scheduler.grpc.pb.cc.o -c -fPIC grpc_scheduler.grpc.pb.cc
	ar qc libhw_grpc_proto.a grpc_scheduler.grpc.pb.cc.o grpc_scheduler.pb.cc.o
	ranlib libhw_grpc_proto.a
	g++ -DCARES_STATICLIB -isystem /home/test/.local/include -o grpc_cpp.o -c grpc_cpp.cpp -fPIC
	g++ grpc_cpp.o libhw_grpc_proto.a /home/test/.local/lib/libabsl_flags.a /home/test/.local/lib/libabsl_flags_parse.a /home/test/.local/lib/libgrpc++_reflection.a /home/test/.local/lib/libgrpc++.a /home/test/.local/lib/libprotobuf.a /home/test/.local/lib/libgrpc.a /home/test/.local/lib/libre2.a /home/test/.local/lib/libupb_json_lib.a /home/test/.local/lib/libupb_textformat_lib.a /home/test/.local/lib/libupb_collections_lib.a /home/test/.local/lib/libupb.a /home/test/.local/lib/libutf8_range_lib.a /home/test/.local/lib/libz.a /home/test/.local/lib/libcares.a /home/test/.local/lib/libgpr.a /home/test/.local/lib/libabsl_random_distributions.a /home/test/.local/lib/libabsl_random_seed_sequences.a /home/test/.local/lib/libabsl_random_internal_pool_urbg.a /home/test/.local/lib/libabsl_random_internal_randen.a /home/test/.local/lib/libabsl_random_internal_randen_hwaes.a /home/test/.local/lib/libabsl_random_internal_randen_hwaes_impl.a /home/test/.local/lib/libabsl_random_internal_randen_slow.a /home/test/.local/lib/libabsl_random_internal_platform.a /home/test/.local/lib/libabsl_random_internal_seed_material.a /home/test/.local/lib/libabsl_random_seed_gen_exception.a /home/test/.local/lib/libssl.a /home/test/.local/lib/libcrypto.a /home/test/.local/lib/libaddress_sorting.a -ldl -lm -lrt -pthread /home/test/.local/lib/libabsl_log_internal_check_op.a /home/test/.local/lib/libabsl_leak_check.a /home/test/.local/lib/libabsl_die_if_null.a /home/test/.local/lib/libabsl_log_internal_conditions.a /home/test/.local/lib/libabsl_log_internal_message.a /home/test/.local/lib/libabsl_log_internal_nullguard.a /home/test/.local/lib/libabsl_examine_stack.a /home/test/.local/lib/libabsl_log_internal_format.a /home/test/.local/lib/libabsl_log_internal_proto.a /home/test/.local/lib/libabsl_log_internal_log_sink_set.a /home/test/.local/lib/libabsl_log_sink.a /home/test/.local/lib/libabsl_log_entry.a /home/test/.local/lib/libabsl_log_initialize.a /home/test/.local/lib/libabsl_log_globals.a /home/test/.local/lib/libabsl_log_internal_globals.a /home/test/.local/lib/libabsl_statusor.a /home/test/.local/lib/libabsl_status.a /home/test/.local/lib/libabsl_strerror.a /home/test/.local/lib/libutf8_validity.a /home/test/.local/lib/libabsl_flags_usage.a /home/test/.local/lib/libabsl_flags_usage_internal.a /home/test/.local/lib/libabsl_flags.a /home/test/.local/lib/libabsl_flags_internal.a /home/test/.local/lib/libabsl_flags_marshalling.a /home/test/.local/lib/libabsl_flags_reflection.a /home/test/.local/lib/libabsl_flags_config.a /home/test/.local/lib/libabsl_flags_private_handle_accessor.a /home/test/.local/lib/libabsl_flags_commandlineflag.a /home/test/.local/lib/libabsl_flags_commandlineflag_internal.a /home/test/.local/lib/libabsl_flags_program_name.a /home/test/.local/lib/libabsl_cord.a /home/test/.local/lib/libabsl_cordz_info.a /home/test/.local/lib/libabsl_cord_internal.a /home/test/.local/lib/libabsl_cordz_functions.a /home/test/.local/lib/libabsl_cordz_handle.a /home/test/.local/lib/libabsl_crc_cord_state.a /home/test/.local/lib/libabsl_crc32c.a /home/test/.local/lib/libabsl_str_format_internal.a /home/test/.local/lib/libabsl_crc_internal.a /home/test/.local/lib/libabsl_crc_cpu_detect.a /home/test/.local/lib/libabsl_raw_hash_set.a /home/test/.local/lib/libabsl_hash.a /home/test/.local/lib/libabsl_bad_variant_access.a /home/test/.local/lib/libabsl_city.a /home/test/.local/lib/libabsl_low_level_hash.a /home/test/.local/lib/libabsl_bad_optional_access.a /home/test/.local/lib/libabsl_hashtablez_sampler.a /home/test/.local/lib/libabsl_exponential_biased.a /home/test/.local/lib/libabsl_synchronization.a /home/test/.local/lib/libabsl_graphcycles_internal.a /home/test/.local/lib/libabsl_kernel_timeout_internal.a /home/test/.local/lib/libabsl_time.a /home/test/.local/lib/libabsl_civil_time.a /home/test/.local/lib/libabsl_time_zone.a /home/test/.local/lib/libabsl_stacktrace.a /home/test/.local/lib/libabsl_symbolize.a /home/test/.local/lib/libabsl_strings.a /home/test/.local/lib/libabsl_string_view.a /home/test/.local/lib/libabsl_strings_internal.a /home/test/.local/lib/libabsl_int128.a /home/test/.local/lib/libabsl_throw_delegate.a /home/test/.local/lib/libabsl_malloc_internal.a /home/test/.local/lib/libabsl_debugging_internal.a /home/test/.local/lib/libabsl_demangle_internal.a /home/test/.local/lib/libabsl_base.a -lpthread /home/test/.local/lib/libabsl_raw_logging_internal.a /home/test/.local/lib/libabsl_log_severity.a /home/test/.local/lib/libabsl_spinlock_wait.a -lrt -shared -o libgrpc_client.so -I./ -fPIC
	# g++ TestWrapper.c -shared -o libmyclass.so -L./ -ltestclass -fPIC  -Xlinker -rpath=./
	gcc main.c -o main -lgrpc_client -L./ -I . -Xlinker -rpath=./

	# greeter_server
	g++ -DCARES_STATICLIB -isystem /home/test/.local/include -o greeter_server.cc.o -c greeter_server.cc
	g++ greeter_server.cc.o -o greeter_server libhw_grpc_proto.a /home/test/.local/lib/libabsl_flags.a /home/test/.local/lib/libabsl_flags_parse.a /home/test/.local/lib/libgrpc++_reflection.a /home/test/.local/lib/libgrpc++.a /home/test/.local/lib/libprotobuf.a /home/test/.local/lib/libgrpc.a /home/test/.local/lib/libre2.a /home/test/.local/lib/libupb_json_lib.a /home/test/.local/lib/libupb_textformat_lib.a /home/test/.local/lib/libupb_collections_lib.a /home/test/.local/lib/libupb.a /home/test/.local/lib/libutf8_range_lib.a /home/test/.local/lib/libz.a /home/test/.local/lib/libcares.a /home/test/.local/lib/libgpr.a /home/test/.local/lib/libabsl_random_distributions.a /home/test/.local/lib/libabsl_random_seed_sequences.a /home/test/.local/lib/libabsl_random_internal_pool_urbg.a /home/test/.local/lib/libabsl_random_internal_randen.a /home/test/.local/lib/libabsl_random_internal_randen_hwaes.a /home/test/.local/lib/libabsl_random_internal_randen_hwaes_impl.a /home/test/.local/lib/libabsl_random_internal_randen_slow.a /home/test/.local/lib/libabsl_random_internal_platform.a /home/test/.local/lib/libabsl_random_internal_seed_material.a /home/test/.local/lib/libabsl_random_seed_gen_exception.a /home/test/.local/lib/libssl.a /home/test/.local/lib/libcrypto.a /home/test/.local/lib/libaddress_sorting.a -ldl -lm -lrt -pthread /home/test/.local/lib/libabsl_log_internal_check_op.a /home/test/.local/lib/libabsl_leak_check.a /home/test/.local/lib/libabsl_die_if_null.a /home/test/.local/lib/libabsl_log_internal_conditions.a /home/test/.local/lib/libabsl_log_internal_message.a /home/test/.local/lib/libabsl_log_internal_nullguard.a /home/test/.local/lib/libabsl_examine_stack.a /home/test/.local/lib/libabsl_log_internal_format.a /home/test/.local/lib/libabsl_log_internal_proto.a /home/test/.local/lib/libabsl_log_internal_log_sink_set.a /home/test/.local/lib/libabsl_log_sink.a /home/test/.local/lib/libabsl_log_entry.a /home/test/.local/lib/libabsl_log_initialize.a /home/test/.local/lib/libabsl_log_globals.a /home/test/.local/lib/libabsl_log_internal_globals.a /home/test/.local/lib/libabsl_statusor.a /home/test/.local/lib/libabsl_status.a /home/test/.local/lib/libabsl_strerror.a /home/test/.local/lib/libutf8_validity.a /home/test/.local/lib/libabsl_flags_usage.a /home/test/.local/lib/libabsl_flags_usage_internal.a /home/test/.local/lib/libabsl_flags.a /home/test/.local/lib/libabsl_flags_internal.a /home/test/.local/lib/libabsl_flags_marshalling.a /home/test/.local/lib/libabsl_flags_reflection.a /home/test/.local/lib/libabsl_flags_config.a /home/test/.local/lib/libabsl_flags_private_handle_accessor.a /home/test/.local/lib/libabsl_flags_commandlineflag.a /home/test/.local/lib/libabsl_flags_commandlineflag_internal.a /home/test/.local/lib/libabsl_flags_program_name.a /home/test/.local/lib/libabsl_cord.a /home/test/.local/lib/libabsl_cordz_info.a /home/test/.local/lib/libabsl_cord_internal.a /home/test/.local/lib/libabsl_cordz_functions.a /home/test/.local/lib/libabsl_cordz_handle.a /home/test/.local/lib/libabsl_crc_cord_state.a /home/test/.local/lib/libabsl_crc32c.a /home/test/.local/lib/libabsl_str_format_internal.a /home/test/.local/lib/libabsl_crc_internal.a /home/test/.local/lib/libabsl_crc_cpu_detect.a /home/test/.local/lib/libabsl_raw_hash_set.a /home/test/.local/lib/libabsl_hash.a /home/test/.local/lib/libabsl_bad_variant_access.a /home/test/.local/lib/libabsl_city.a /home/test/.local/lib/libabsl_low_level_hash.a /home/test/.local/lib/libabsl_bad_optional_access.a /home/test/.local/lib/libabsl_hashtablez_sampler.a /home/test/.local/lib/libabsl_exponential_biased.a /home/test/.local/lib/libabsl_synchronization.a /home/test/.local/lib/libabsl_graphcycles_internal.a /home/test/.local/lib/libabsl_kernel_timeout_internal.a /home/test/.local/lib/libabsl_time.a /home/test/.local/lib/libabsl_civil_time.a /home/test/.local/lib/libabsl_time_zone.a /home/test/.local/lib/libabsl_stacktrace.a /home/test/.local/lib/libabsl_symbolize.a /home/test/.local/lib/libabsl_strings.a /home/test/.local/lib/libabsl_string_view.a /home/test/.local/lib/libabsl_strings_internal.a /home/test/.local/lib/libabsl_int128.a /home/test/.local/lib/libabsl_throw_delegate.a /home/test/.local/lib/libabsl_malloc_internal.a /home/test/.local/lib/libabsl_debugging_internal.a /home/test/.local/lib/libabsl_demangle_internal.a /home/test/.local/lib/libabsl_base.a -lpthread /home/test/.local/lib/libabsl_raw_logging_internal.a /home/test/.local/lib/libabsl_log_severity.a /home/test/.local/lib/libabsl_spinlock_wait.a -lrt 
	

remove:
	rm -rf grpc_scheduler.grpc.pb.cc.o grpc_scheduler.grpc.pb.cc grpc_scheduler.grpc.pb.h grpc_scheduler.pb.cc grpc_scheduler.pb.h grpc_scheduler.pb.cc.o libhw_grpc_proto.a
	rm -rf grpc_cpp.o
	rm -rf main.o greeter_server.o


clean:
	rm -rf libgrpc_client.so
	rm -rf grpc_scheduler.grpc.pb.cc.o grpc_scheduler.grpc.pb.cc grpc_scheduler.grpc.pb.h grpc_scheduler.pb.cc grpc_scheduler.pb.h grpc_scheduler.pb.cc.o libhw_grpc_proto.a
	rm -rf grpc_cpp.o
	rm -rf main greeter_server main.o greeter_server.cc.o
